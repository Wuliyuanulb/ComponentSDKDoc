

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Code snapshot &mdash; Component SDK  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Ignore files when creating snapshot" href="ignore-files.html" />
    <link rel="prev" title="Environment" href="running-environment.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Component SDK
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts.html">Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../components.html">Components</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../command_component.html">Command Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../distributed_component.html">Distributed Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parallel_component.html">Parallel Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hdi_component.html">HDInsight Component</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component-spec-definition.html">Definition of component spec</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../component-spec-topics.html">Component spec advanced topics</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="inputs-and-outputs.html">Inputs and outputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="running-environment.html">Environment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Code snapshot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ignore-files.html">Ignore files when creating snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="component-build.html">Component build</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../use-component-spec-schema-in-vscode.html">How to use component spec schema in vscode</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sdk_reference.html">SDK Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../links.html">Useful Links</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Component SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../components.html">Components</a> &raquo;</li>
        
          <li><a href="../component-spec-topics.html">Component spec advanced topics</a> &raquo;</li>
        
      <li>Code snapshot</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/components/component-spec-topics/code-snapshot.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="code-snapshot">
<h1>Code snapshot<a class="headerlink" href="#code-snapshot" title="Permalink to this headline">¶</a></h1>
<p><em>Code snapshot</em> is used to allow the component author to change the default snapshot folder.
For example, for the following folder structure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">src</span><span class="o">/</span>
  <span class="n">library1</span><span class="o">/</span>
    <span class="n">hello</span><span class="o">.</span><span class="n">py</span>
  <span class="n">library2</span><span class="o">/</span>
    <span class="n">greetings</span><span class="o">.</span><span class="n">py</span>
  <span class="n">component_entry</span><span class="o">/</span>
    <span class="n">conda</span><span class="o">.</span><span class="n">yaml</span>
    <span class="n">component_spec</span><span class="o">.</span><span class="n">yaml</span>
    <span class="n">run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The snapshot package will look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">conda</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">component_spec</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If we specify <code class="docutils literal"><span class="pre">code:</span> <span class="pre">..</span></code> in component spec, setting the snapshot folder to the <code class="docutils literal"><span class="pre">src/</span></code> level, the snapshot will look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">library1</span><span class="o">/</span>
  <span class="n">hello</span><span class="o">.</span><span class="n">py</span>
<span class="n">library2</span><span class="o">/</span>
  <span class="n">greetings</span><span class="o">.</span><span class="n">py</span>
<span class="n">component_entry</span><span class="o">/</span>
  <span class="n">conda</span><span class="o">.</span><span class="n">yaml</span>
  <span class="n">component_spec</span><span class="o">.</span><span class="n">yaml</span>
  <span class="n">run</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Here are some notes for the usage of <em>code snapshot</em>:</p>
<ul class="simple">
<li>Specify the relative path start from the folder containing the component spec yaml file. The code snapshot should be parent folders of the component spec file since the component spec file should always be included in the snapshot file. Thus, the possible value for <code class="docutils literal"><span class="pre">code</span></code> must be one or more sections of <code class="docutils literal"><span class="pre">../</span></code>s. For the above folder structure example, specify <code class="docutils literal"><span class="pre">../</span></code> will set the snapshot folder to <code class="docutils literal"><span class="pre">src/</span></code>. For other folder structures which need to include furthermore top levels of parent folders, use <code class="docutils literal"><span class="pre">../../</span></code>, <code class="docutils literal"><span class="pre">../../../</span></code>, etc. accordingly.</li>
<li>Use the relative path start from the snapshot folder for any file references in the spec file. For the above example, conda file should be <code class="docutils literal"><span class="pre">component_entry/conda.yaml</span></code> and the entry script should be <code class="docutils literal"><span class="pre">component_entry/run.py</span></code> inside the component spec file.</li>
<li>Use <code class="docutils literal"><span class="pre">.amlignore</span></code> and optionally use <code class="docutils literal"><span class="pre">--amlignore-file</span></code> option to exclude unused files. Refer to <a class="reference internal" href="ignore-files.html"><span class="doc">the document</span></a> for details.</li>
<li>Do not use <a class="reference external" href="https://aka.ms/component-additional-includes">additional includes</a> along with the <em>code snapshot</em>. They could not be used together.</li>
</ul>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://github.com/Azure/DesignerPrivatePreviewFeatures/tree/master/azure-ml-components/samples/components/code-snapshot">Refer to here for an example component</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ignore-files.html" class="btn btn-neutral float-right" title="Ignore files when creating snapshot" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="running-environment.html" class="btn btn-neutral float-left" title="Environment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Microsoft

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>